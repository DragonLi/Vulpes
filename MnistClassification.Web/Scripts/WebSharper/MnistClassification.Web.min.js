(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;$.Define($$,{MnistClassification:{Web:{Client:{LoadMnist:function(p){return b.Start(b.Delay(function(){return b.Bind(c.Async("MnistClassification.Web:0",[]),function(r){return b.Return(p(r));});}));},MnistControls:function(){var s,t,u,v,w,x,y,z;s=e.Div(f.ofArray([e.Text("")]));t=e.Div(f.ofArray([e.Text("")]));u=e.Input(f.ofArray([e.Attr().NewAttr("type","number"),e.Attr().NewAttr("value","0.9"),e.Attr().NewAttr("min","0.0"),e.Attr().NewAttr("max","1.0"),e.Attr().NewAttr("step","0.01")]));v=e.Input(f.ofArray([e.Attr().NewAttr("type","number"),e.Attr().NewAttr("value","0.1"),e.Attr().NewAttr("min","0.0"),e.Attr().NewAttr("max","1.0"),e.Attr().NewAttr("step","0.01")]));w=e.Input(f.ofArray([e.Attr().NewAttr("type","number"),e.Attr().NewAttr("value","100")]));x=e.Input(f.ofArray([e.Attr().NewAttr("type","number"),e.Attr().NewAttr("value","10"),e.Attr().NewAttr("min","1"),e.Attr().NewAttr("max","50")]));y=e.Button(f.ofArray([e.Text("Train MNIST Dataset")]));z=function(){return function(){s.set_Text("Fetching training set.");return i.LoadMnist(function(C){s.set_Text(C+" Starting unsupervised training.");return i.TrainMnistUnsupervised(u.get_Value(),v.get_Value(),w.get_Value(),x.get_Value(),function(D){return s.set_Text(D);});});};};j.Events().OnClick(z,y);return e.Div(f.ofArray([e.Div(f.ofArray([e.Span(f.ofArray([e.Text("Learning Rate")])),e.Span(f.ofArray([u]))])),e.Div(f.ofArray([e.Span(f.ofArray([e.Text("Momentum")])),e.Span(f.ofArray([v]))])),e.Div(f.ofArray([e.Span(f.ofArray([e.Text("Batch Size")])),e.Span(f.ofArray([w]))])),e.Div(f.ofArray([e.Span(f.ofArray([e.Text("Number of Epochs")])),e.Span(f.ofArray([x]))])),y,s,t]));},TrainMnistUnsupervised:function(E,F,G,H,I){return b.Start(b.Delay(function(){return b.Bind(c.Async("MnistClassification.Web:1",[f.ofArray([500,300,150,60,10]),E,F,G,H]),function(K){return b.Return(I(K));});}));},TrainingSet:function(){var L,M,N,O;L={Top:10,Right:10,Bottom:100,Left:40};M=800-L.Left-L.Right;N=500-L.Top-L.Bottom;O=function(P){return function(Q){return function(R){return function(S){var T,U,V,W;T=k.Tags();U=$.New(l,{$:0});V=T.NewTag("canvas",U);W=V.Body;if(m.Equals(W.getContext,undefined)){n.initElement(W);}W.height=R;W.width=Q;P(W.getContext("2d"));return o.add(e.Div(f.ofArray([e.Attr().NewAttr("style","float: left")])),f.ofArray([V,o.add(e.P(f.ofArray([e.Align("center")])),f.ofArray([e.I(f.ofArray([e.Text("Example "+S)]))]))]));};};};};return e.Div($.New(l,{$:0}));}},Controls:{EntryPoint:$.Class({get_Body:function(){return i.MnistControls();}})}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Concurrency);c=$.Safe(a.Remoting);d=$.Safe(a.Html);e=$.Safe(d.Default);f=$.Safe(a.List);g=$.Safe($$.MnistClassification);h=$.Safe(g.Web);i=$.Safe(h.Client);j=$.Safe(d.EventsPervasives);k=$.Safe(e.HTML5);l=$.Safe(f.T);m=$.Safe(a.Unchecked);n=$.Safe($$.G_vmlCanvasManager);return o=$.Safe(d.Operators);});$.OnLoad(function(){return;});}());
